# Project Template

A full-stack project template with Go backend and SolidJS frontend using ConnectRPC and TanStack Router.

## Template Variables

This template uses the following placeholders that need to be replaced when creating a new project:

| Variable | Description | Example |
|----------|-------------|---------|
| `{{PROJECT_NAME}}` | Project name (used for binary name, HTML title) | `myapp` |
| `{{MODULE_PATH}}` | Go module path | `github.com/username/myapp` |
| `{{PORT}}` | Backend server port | `8080` |

## Quick Start

### 1. Copy Template

```bash
cp -r templates/ my-new-project/
cd my-new-project
```

### 2. Replace Variables

**Option A: Manual replacement**

Replace all occurrences in the following files:
- `go.mod` - `{{MODULE_PATH}}`
- `cmd/{{PROJECT_NAME}}/main.go` - `{{PROJECT_NAME}}`, `{{MODULE_PATH}}`, `{{PORT}}`
- `package.json` - `{{PROJECT_NAME}}`
- `Makefile` - `{{PROJECT_NAME}}`
- `vite.config.js` - `{{PORT}}`
- `frontend/index.html` - `{{PROJECT_NAME}}`
- `frontend/src/routes/index.tsx` - `{{PROJECT_NAME}}`

**Option B: Using sed**

```bash
# Replace PROJECT_NAME
find . -type f \( -name "*.go" -o -name "*.json" -o -name "*.yaml" -o -name "*.yml" -o -name "Makefile" \) \
  -exec sed -i 's/{{PROJECT_NAME}}/myapp/g' {} +

# Replace MODULE_PATH
find . -type f \( -name "*.go" -o -name "go.mod" \) \
  -exec sed -i 's|{{MODULE_PATH}}|github.com/username/myapp|g' {} +

# Replace PORT
find . -type f \( -name "*.go" -o -name "*.js" \) \
  -exec sed -i 's/{{PORT}}/8080/g' {} +

# Rename directory
mv "cmd/{{PROJECT_NAME}}" "cmd/myapp"
```

### 3. Setup

```bash
# Install CLI tools (buf, sqlc, golangci-lint, etc.)
make setup-aqua

# Install Node.js dependencies
npm ci
```

### 4. Development

```bash
# Start both backend and frontend
make dev

# Or start separately
make dev-backend   # Backend only
make dev-frontend  # Frontend only
```

## Project Structure

```
.
├── cmd/myapp/           # Go application entry point
│   └── main.go
├── frontend/            # SolidJS + TanStack Router frontend
│   ├── src/
│   │   ├── main.tsx     # App entry point
│   │   ├── routes/      # File-based routes
│   │   ├── lib/         # Utilities (query, transport)
│   │   └── components/  # Reusable components
│   ├── index.html
│   └── assets.go        # Static file embedding
├── sql/                 # Database schema and queries
│   ├── schema.sql
│   └── query.sql
├── store/               # Generated by sqlc
├── proto/               # Protocol Buffer definitions
├── gen/go/              # Generated Go code from proto
├── .github/workflows/   # CI/CD pipelines
├── go.mod
├── package.json
├── Makefile
├── vite.config.js
├── tsconfig.json
├── panda.config.ts      # Panda CSS configuration
├── biome.json           # Biome linter/formatter config
├── buf.yaml             # Buf configuration
├── buf.gen.yaml         # Buf code generation
├── sqlc.yaml            # sqlc configuration
└── aqua.yaml            # Aqua package manager
```

## Technology Stack

### Backend
- **Go** 1.25+
- **ConnectRPC** - gRPC-compatible HTTP APIs
- **SQLite** with sqlc (type-safe SQL)
- **sqlc** - Type-safe SQL code generation
- **Buf** - Protocol Buffer management

### Frontend
- **SolidJS** - Reactive UI framework
- **TanStack Router** - Type-safe file-based routing
- **TanStack Query** - Data fetching and caching
- **ConnectRPC Web** - gRPC-web client
- **Panda CSS** - CSS-in-JS styling
- **Biome** - Linting and formatting
- **Vitest** + Playwright - Testing

### DevOps
- **Aqua** - CLI tool version manager
- **GitHub Actions** - CI/CD
- **golangci-lint** - Go linting

## Available Commands

```bash
# Setup
make setup           # Install all dependencies
make setup-aqua      # Install CLI tools
make setup-npm       # Install Node.js packages

# Development
make dev             # Start both backend and frontend
make dev-backend     # Start backend only
make dev-frontend    # Start frontend only

# Code Generation
make gen             # Generate all code (proto + sqlc)
make gen-buf         # Generate from proto files
make gen-sqlc        # Generate from SQL files

# Testing
make test            # Run all tests
make test-backend    # Run Go tests
make test-frontend   # Run frontend tests

# Linting
make lint-backend    # Run golangci-lint
make lint-frontend   # Run Biome linter

# Building
make build           # Build both frontend and backend
make build-frontend  # Build frontend only
make build-backend   # Build backend only

# Cleanup
make clean           # Remove build artifacts
```

## Adding New Features

### Adding a Database Table

1. Add schema to `sql/schema.sql`
2. Add queries to `sql/query.sql`
3. Run `make gen-sqlc` to generate Go code
4. Use generated code in `store/` package

### Adding a gRPC Service

1. Define service in `proto/<service>/v1/<service>.proto`
2. Run `make gen-buf` to generate Go and TypeScript code
3. Implement handler in backend
4. Use generated client in frontend

### Adding a Route

1. Create file in `frontend/src/routes/` following TanStack Router conventions
2. The route will be automatically registered

## Environment Variables

### Backend
- `PORT` - Server port (default: 8080)

### Frontend
- `VITE_USE_MOCKS` - Enable MSW mocks for development

## License

[Your License Here]
